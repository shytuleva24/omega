function sendForm(){document.querySelectorAll("form").forEach((e=>{e.addEventListener("submit",(function(t){t.preventDefault();const s=e.querySelector(".name").value,n=e.querySelector(".email").value,o=e.querySelector(".phone").value,l=e.querySelector(".message").value,a=e.querySelector(".success-message"),r=e.querySelector(".send-button");r.classList.add("loading");const u={name:s,email:n,phone:o,message:l},c=JSON.stringify(u),i=new XMLHttpRequest;i.open("POST","php/index.php"),i.setRequestHeader("Content-Type","application/json"),i.onload=function(){console.log(i.responseText),r.classList.remove("loading"),a.style.display="block",setTimeout((()=>{a.style.display="none"}),2500)},i.send(c),e.reset()}))}))}
function menuAndSmoothScroll(){const e=document.querySelector(".header"),t=document.querySelector(".menu-icon"),n=document.querySelectorAll(".scroll-to"),o=document.querySelector(".menu-body");let c=0;if(window.addEventListener("scroll",(function(){let t=window.pageYOffset||document.documentElement.scrollTop;t>c?e.classList.add("header-hidden"):e.classList.remove("header-hidden"),c=t<=0?0:t})),t&&t.addEventListener("click",(function(e){document.body.classList.toggle("lock"),t.classList.toggle("open-menu"),o.classList.toggle("open-menu")})),n.length>0){n.forEach((n=>{n.onclick=function(c){n.hasAttribute("data-link")||(c.preventDefault(),function(n){if(document.querySelector(n)){const c=document.querySelector(n);let i=c.getBoundingClientRect().top+window.pageYOffset;!e.classList.contains("header-hidden")&&i<window.pageYOffset&&(i=c.getBoundingClientRect().top+window.pageYOffset-e.offsetHeight),t.classList.contains("open-menu")&&(document.body.classList.remove("lock"),t.classList.remove("open-menu"),o.classList.remove("open-menu")),window.scrollTo({top:i,behavior:"smooth"})}}(this.getAttribute("href")))}}))}}function popup(){const e=document.querySelectorAll(".popup-link"),t=document.querySelector("body"),n=document.querySelectorAll(".lock-padding");let o=!0;const c=800;if(e.length)for(let t=0;t<e.length;t++){const n=e[t];n.addEventListener("click",(function(e){const t=n.getAttribute("href").replace("#","");l(document.getElementById(t)),e.preventDefault()}))}const i=document.querySelectorAll(".close-popup");if(i.length>0)for(let e=0;e<i.length;e++){const t=i[e];t.addEventListener("click",(function(e){s(t.closest(".popup")),e.preventDefault()}))}function l(e){if(e&&o){const i=document.querySelector(".popup.open");i?s(i,!1):function(){const e=window.innerWidth-document.querySelector("section").offsetWidth+"px";if(n.length>0)for(let t=0;t<n.length;t++){n[t].style.paddingRight=e}t.style.paddingRight=e,t.classList.add("lock"),o=!1,setTimeout((function(){o=!0}),c)}(),e.classList.add("open"),e.addEventListener("click",(function(e){e.target.closest(".popup_content")||s(e.target.closest(".popup"))}))}}function s(e,i=!0){o&&e&&(e.classList.remove("open"),i&&(setTimeout((function(){if(n.length>0)for(let e=0;e<n.length;e++)n[e].style.paddingRight="0px";t.style.paddingRight="0px",t.classList.remove("lock")}),c),o=!1,setTimeout((function(){o=!0}),c)))}document.addEventListener("keydown",(function(e){if(27===e.which){s(document.querySelector(".popup.open"))}}))}function animBlockInScroll(){const e=document.querySelectorAll(".anim-items");if(e.length>0){function t(){e.forEach((e=>{const t=e,n=t.offsetHeight,o=function(e){const t=e.getBoundingClientRect();let n=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+o,left:t.left+n}}(t).top;let c=window.innerHeight-n/4;n>window.innerHeight&&(c=window.innerHeight-window.innerHeight/4),window.pageYOffset>o-c&&window.pageYOffset<o+n&&t.classList.add("active-anim")}))}window.addEventListener("scroll",t),window.addEventListener("touchmove",t),window.addEventListener("wheel",t),setTimeout((()=>{t()}),300)}}window.addEventListener("load",(()=>{popup(),menuAndSmoothScroll(),animBlockInScroll()}));